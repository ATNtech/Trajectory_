(()=>{var e,t,n,o={428817:e=>{e.exports={reactions_preview_item:'<div class="ReactionsPreviewItem ReactionsPreviewItem--stackOverlay %class%" style="background-image: url(\'%image_url%\');" aria-label="%title%"></div>'}},429697:(e,t,n)=>{"use strict";n.d(t,{default:()=>v});var o=n(654337),i=n(773949),r=n(486186),a=(n(45697),n(292859)),s=n(316787),u=n(667294),c=n(696630),l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},d=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){t.removeClasses(e,"exit"),t.addClass(e,n?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var o=n?"appear":"enter";t.addClass(e,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var o=n?"appear":"enter";t.removeClasses(e,o),t.addClass(e,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),t.addClass(e,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){t.addClass(e,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){t.removeClasses(e,"exit"),t.addClass(e,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,o="string"==typeof n,i=o?""+(o&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:o?i+"-active":n[e+"Active"],doneClassName:o?i+"-done":n[e+"Done"]}},t}(0,r.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var o=this.getClassNames(t)[n+"ClassName"];"appear"===t&&"done"===n&&(o+=" "+this.getClassNames("enter").doneClassName),"active"===n&&e&&e.scrollTop,this.appliedClasses[t][n]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,a.default)(e,t)}))}(e,o)},n.removeClasses=function(e,t){var n=this.appliedClasses[t],o=n.base,i=n.active,r=n.done;this.appliedClasses[t]={},o&&l(e,o),i&&l(e,i),r&&l(e,r)},n.render=function(){var e=this.props,t=(e.classNames,(0,i.default)(e,["classNames"]));return u.createElement(c.default,(0,o.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(u.Component);d.defaultProps={classNames:""},d.propTypes={};const v=d},696630:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var o=n(773949),i=n(486186),r=(n(45697),n(667294)),a=n(973935),s=n(806035),u=n(500220),c="unmounted",l="exited",d="entering",v="entered",f="exiting",p=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var i,r=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?r?(i=l,o.appearStatus=d):i=v:i=t.unmountOnExit||t.mountOnEnter?c:l,o.state={status:i},o.nextCallback=null,o}(0,i.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===c?{status:l}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==v&&(t=d):n!==d&&n!==v||(t=f)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=a.findDOMNode(this);t===d?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===l&&this.setState({status:c})},n.performEnter=function(e,t){var n=this,o=this.props.enter,i=this.context?this.context.isMounting:t,r=this.getTimeouts(),a=i?r.appear:r.enter;!t&&!o||s.default.disabled?this.safeSetState({status:v},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,i),this.safeSetState({status:d},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a,(function(){n.safeSetState({status:v},(function(){n.props.onEntered(e,i)}))}))})))},n.performExit=function(e){var t=this,n=this.props.exit,o=this.getTimeouts();n&&!s.default.disabled?(this.props.onExit(e),this.safeSetState({status:f},(function(){t.props.onExiting(e),t.onTransitionEnd(e,o.exit,(function(){t.safeSetState({status:l},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:l},(function(){t.props.onExited(e)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var o=null==t&&!this.props.addEndListener;e&&!o?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===c)return null;var t=this.props,n=t.children,i=(0,o.default)(t,["children"]);if(delete i.in,delete i.mountOnEnter,delete i.unmountOnExit,delete i.appear,delete i.enter,delete i.exit,delete i.timeout,delete i.addEndListener,delete i.onEnter,delete i.onEntering,delete i.onEntered,delete i.onExit,delete i.onExiting,delete i.onExited,"function"==typeof n)return r.createElement(u.default.Provider,{value:null},n(e,i));var a=r.Children.only(n);return r.createElement(u.default.Provider,{value:null},r.cloneElement(a,i))},t}(r.Component);function m(){}p.contextType=u.default,p.propTypes={},p.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:m,onEntering:m,onEntered:m,onExit:m,onExiting:m,onExited:m},p.UNMOUNTED=0,p.EXITED=1,p.ENTERING=2,p.ENTERED=3,p.EXITING=4;const g=p},500220:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o=n(667294).createContext(null)},806035:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});const o={disabled:!1}},654337:(e,t,n)=>{"use strict";function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}n.d(t,{default:()=>o})},486186:(e,t,n)=>{"use strict";function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{default:()=>o})},773949:(e,t,n)=>{"use strict";function o(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{default:()=>o})},292859:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var o=n(305261);function i(e,t){e.classList?e.classList.add(t):(0,o.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},305261:(e,t,n)=>{"use strict";function o(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>o})},316787:(e,t,n)=>{"use strict";function o(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function i(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=o(e.className,t):e.setAttribute("class",o(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>i})},625206:(e,t,n)=>{"use strict";n.d(t,{once:()=>o});var o=function(e){var t=!1;return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!t)return t=!0,e.apply(this,n)}}},522414:(e,t,n)=>{"use strict";function o(e,t){for(var n in t)if(t.hasOwnProperty(n)){var o="{"+n+"}";e=e.replace(o,t[n])}return e}function i(e,t,n,o){return void 0===o&&(o="tag"),n=(n=n.replace("{"+o+"}",e)).replace("{/"+o+"}",t)}n.d(t,{langReplace:()=>o,langTag:()=>i})},224298:(e,t,n)=>{"use strict";n.d(t,{preservePositionBetween:()=>r});var o=n(712459),i=n(625206);function r(e,t){var n=(void 0===t?{}:t).scrollByImpl,r=void 0===n?window.scrollBy:n,a=e;return{start:(0,i.once)((function(e){e&&(a=e);var t=(0,o.getElementOffset)(a);return(0,i.once)((function(e){if(e&&(a=e),a.isConnected){var n=(0,o.getElementOffset)(a);r(0,n.top-t.top)}}))}))}}},692128:(e,t,n)=>{"use strict";n.d(t,{HIDE_TOOLTIP_TIMEOUT:()=>o,SHOW_TOOLTIP_TIMEOUT:()=>i,REACTION_ID_DEFAULT:()=>r,REACTION_ID_MAX:()=>a,REACTION_ID_MIN:()=>s,REACTION_ID_UNSET:()=>u,REACTION_SET_ITEMS_MIN_COUNT:()=>c});var o=600,i=140,r=0,a=7,s=0,u=void 0,c=2},880001:(e,t,n)=>{"use strict";n.d(t,{loadAnimation:()=>i,onAnimationReady:()=>r,getAnimation:()=>a});var o=n(570655),i=function(e){return function(t){var n,i,r=t.animationData,a=t.animationURL,s=t.container,u=t.loadAnimationParams,c=void 0===u?{}:u,l=r?{animationData:r}:{path:a},d={renderer:"svg",autoplay:null!==(n=null==c?void 0:c.autoplay)&&void 0!==n&&n,loop:null===(i=null==c?void 0:c.loop)||void 0===i||i,rendererSettings:{progressiveLoad:!0}},v=(0,o.__assign)((0,o.__assign)((0,o.__assign)({},l),d),{container:s});return e.loadAnimation(v)}},r=function(e,t){e.isLoaded?t():e.addEventListener("DOMLoaded",(function(){t()}))};var a=function(e){var t=e.animationItemGet,n=e.animationItemSet,o=e.loadAnimation;return function(e,i,r){var a=e,s=t({animationId:a}),u=o({animationData:s,animationURL:e,container:i,loadAnimationParams:null==r?void 0:r.loadAnimationParams});return s||function(e,t){e.addEventListener("data_ready",(function(){t(e.animationData)}))}(u,(function(e){n({animationId:a,loadedAnimationData:e})})),u}}},994356:(e,t,n)=>{"use strict";n.d(t,{makePendingRequestState:()=>o});var o=function(e){void 0===e&&(e={});var t=Object.create(null);return{cancel:function(e){var n=t[e];null==n||n.abort(),delete t[e]},register:function(n,o){var i,r=t[n],a=function(e){var n;return void 0!==(null===(n=t[e])||void 0===n?void 0:n.throttleTimerId)}(n);if(r){if(a)return!1;console.warn("Reactions pending request for key '"+n+"' wasn't unregistered, but has to be overwritten.\nPending request should be cancelled through .cancel() explicitly before .register()"),r.abort()}t[n]={abort:o},void 0!==(null==e?void 0:e.throttleMs)&&(i=function(e,n){var o=t[e];if(o){o.throttleTimerId&&window.clearTimeout(o.throttleTimerId);var i=window.setTimeout((function(){var n=t[e];n&&(n.throttleTimerId=void 0)}),n);return o.throttleTimerId=i,i}}(n,e.throttleMs));return function(){var e;(null===(e=t[n])||void 0===e?void 0:e.abort)===o&&delete t[n],window.clearTimeout(i)}}}}},509723:(e,t,n)=>{"use strict";n.d(t,{isDebugEnabled:()=>r});var o=n(651988),i=void 0,r=function(){return void 0!==i?i:i=!!o.default.get("reactions.debug_enabled")}},956146:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>i});var o=n(611386);function i(e){var t=e.error,n=e.reportError;void 0!==n&&n&&(0,o.logError)(t,{environment:"reactions"}),console.error(t)}},754:(e,t,n)=>{"use strict";n.d(t,{getDefaultReaction:()=>s,getDefaultReactionTitle:()=>u,prepareReactionMenuSet:()=>l,isReactionIdUnset:()=>d,isValidReactionId:()=>v,parseReactionId:()=>f,parseReactionIdOrUnset:()=>p,validateReactionSetPayloaditems:()=>m,parseReactionMenuConfig:()=>g,calcCounters:()=>E,calcCountersSum:()=>_,calcCountersWeightedSum:()=>h,hasReactionsForCounts:()=>b});var o=n(570655),i=n(692128),r=n(457700),a=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},s=function(e){return e.itemsById[i.REACTION_ID_DEFAULT]},u=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.title},c=function(e,t){return 0===e.length?"":(n=e,o=function(e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)},i=!1,void 0===i&&(i=!0),n.reduce((function(e,t){var n=o(t),r=o(e);return r===n?i?e:t:r<n?e:t}))).url;var n,o,i},l=function(e,t,n){var o=n.imageMenuSize,i=n.imagePreviewSize,r=t.map((function(e){var t=e.asset,n=e.color_sets,r=e.id,a=e.score,s=e.title;return{animationURL:t.animation_url||void 0,backgroundColor:null==n?void 0:n.background,id:r,imageMenuURL:c(t.images,o),imagePreviewURL:c(t.images,i),score:a,title:s,titleColor:null==n?void 0:n.foreground}})),a={};return r.forEach((function(e){a[e.id]=e})),{id:e,items:r,itemsById:a}},d=function(e){return e===i.REACTION_ID_UNSET},v=function(e){return a(e)&&e>=i.REACTION_ID_MIN&&e<=i.REACTION_ID_MAX},f=function(e){var t=parseInt(e,10);return v(t)?{isValid:!0,value:t}:{isValid:!1}},p=function(e){var t=f(e);return t.isValid?t.value:i.REACTION_ID_UNSET},m=function(e,t){if(e.length<i.REACTION_SET_ITEMS_MIN_COUNT)return{error:new Error("Invalid reactions items count in set '"+t+"': "+e.length)}},g=function(e){if(null!==(t=e)&&"object"==typeof t){var t,n={},o=e.animationShowStaticAfterEnd,i=e.reportJsErrors,r=e.menuShowDelay;return"number"!=typeof r&&void 0!==r||(n.menuShowDelay=r),"boolean"==typeof o&&(n.animationShowStaticAfterEnd=o),"boolean"==typeof i&&(n.reportJsErrors=i),n}},E=function(e,t){var n=(0,r.reactionCountsBrandWrap)({});return Object.entries((0,r.reactionCountsBrandUnwrap)(e)).forEach((function(e){var i,r,a,s=(0,o.__read)(e,2),u=s[0],c=s[1],l=u,d=null!==(a=null===(r=null===(i=null==t?void 0:t.itemsById)||void 0===i?void 0:i[l])||void 0===r?void 0:r.score)&&void 0!==a?a:1;n[l]=d*(c||0)})),n},_=function(e){return Object.values((0,r.reactionCountsBrandUnwrap)(e)).reduce((function(e,t){return e+(t||0)}),0)},h=function(e){return _((0,r.reactionCountsBrandWrap)(e))},b=function(e){return _(e)>0}},457700:(e,t,n)=>{"use strict";n.d(t,{reactionCountsBrandUnwrap:()=>o,reactionCountsBrandWrap:()=>i});var o=function(e){return e},i=function(e){return e}},66081:(e,t,n)=>{"use strict";var o=n(228385);window.Reactions=o.ReactionsEntryGlobal,(0,o.init)();try{window.stManager.done(window.jsc("web/reactions.js"))}catch(e){}},728542:(e,t,n)=>{"use strict";n.d(t,{useOnClickOutside:()=>i});var o=n(667294),i=function(e,t){(0,o.useEffect)((function(){var n=function(n){!e.current||n.target instanceof Node&&e.current.contains(n.target)||t(n)};return document.addEventListener("mousedown",n,{passive:!0}),document.addEventListener("touchstart",n,{passive:!0}),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}},59727:(e,t,n)=>{"use strict";n.d(t,{stripPercentVars:()=>o});var o=function(e){return e.replace(/%[-\w]+%/g,"")}},283767:(e,t,n)=>{"use strict";n.d(t,{parseLikeObjectId:()=>i,likePostObjectId:()=>r,likeReplyObjectId:()=>a,getElementLikeButtonCount:()=>s,getElementLikeButtonIcon:()=>u,getElementLikeButtonLabel:()=>c});var o=n(570655);function i(e){var t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;var n=(0,o.__read)(t,3);return{objectType:n[1],objectId:n[2]}}var r=function(e){return"wall"+e},a=function(e){return"wall_reply"+e},s=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_count, ._like_button_count"))&&void 0!==t?t:void 0},u=function(e){var t;return null!==(t=null==e?void 0:e.querySelector(".like_button_icon, ._like_button_icon"))&&void 0!==t?t:void 0},c=function(e){var t;return null!==(t=e.querySelector(".like_button_label, ._like_button_label"))&&void 0!==t?t:void 0}},383794:(e,t,n)=>{"use strict";n.d(t,{PreloadImages:()=>r});var o=n(10246),i=n(667294),r=i.memo((function(e){var t=e.imageURLs;return i.useEffect((function(){Promise.all(t.map((function(e){return(0,o.preloadImage)(e)}))).catch((function(){}))}),[t]),null}))},314258:(e,t,n)=>{"use strict";n.d(t,{Reaction:()=>c});var o=n(570655),i=n(667294),r=n(917685),a=n(659397),s=n(892039),u=n(757216),c=function(e){var t=e.animationURL,n=e.image,c=e.onReactionClick,l=e.reactionId,d=e.reactionTitle,v=!0,f=i.useRef(null),p=(0,o.__read)(i.useState(v),2),m=p[0],g=p[1],E=(0,u.useReactionAnimation)({animationElem:f,animationURL:t,play:m}).isAnimationReady&&m,_=function(){null==c||c(l)},h=(0,o.__read)((0,s.useDebouncedCallback)((function(){t&&g(!0)}),80,[t]),2),b=(h[0],h[1]);i.useCallback((function(){b(),g(!1)}),[]);return i.useEffect((function(){return function(){b()}}),[]),i.createElement("div",{className:(0,a.classNames)("Reaction"),onClick:function(e){_(),e.stopPropagation()},onKeyDown:function(e){[r.KEY.RETURN,r.KEY.SPACE].includes(e.keyCode)&&(_(),e.stopPropagation())},onMouseEnter:void 0,onMouseLeave:void 0,tabIndex:0,role:"button","aria-label":d||void 0},i.createElement("div",{className:"Reaction__hoverArea"}),d?i.createElement("div",{className:"Reaction__title"},d):null,i.createElement("div",{className:"Reaction__image",style:{backgroundImage:!E&&n?"url("+n+")":void 0}},i.createElement("div",{className:(0,a.classNames)("Reaction__animationContainer",{"Reaction__animationContainer--hidden":!E}),ref:f})))}},533354:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenu:()=>c});var o=n(570655),i=n(667294),r=n(659397),a=n(917685),s=n(314258),u=n(483156),c=i.forwardRef((function(e,t){var n=e.close,c=e.currentReactionId,l=e.onReactionChoose,d=e.position,v=void 0===d?u.PopperVerticalPosition.TOP:d,f=e.reactionsOptions,p=(0,o.__rest)(e,["close","currentReactionId","onReactionChoose","position","reactionsOptions"]),m=i.useCallback((function(e){e.keyCode===a.KEY.ESC&&(null==n||n())}),[]);return i.createElement("div",(0,o.__assign)({},p,{className:(0,r.classNames)("ReactionsMenu ReactionsMenu--extraHoverArea",{"ReactionsMenu--extraHoverAreaToTop":v===u.PopperVerticalPosition.TOP,"ReactionsMenu--extraHoverAreaToBottom":v===u.PopperVerticalPosition.BOTTOM}),onKeyDown:m,ref:t}),i.createElement("div",{className:"ReactionsMenu__inner"},f.items.map((function(e){return i.createElement(s.Reaction,{key:e.id,animationURL:e.animationURL,image:e.imageMenuURL,isSelected:e.id===c,onReactionClick:l,reactionId:e.id,reactionTitle:e.title})}))))}))},892039:(e,t,n)=>{"use strict";n.d(t,{useDebouncedCallback:()=>r});var o=n(570655),i=n(667294),r=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=[]);var r=(0,i.useCallback)(function(e,t,n){void 0===t&&(t=0);var i,r=(void 0===n?{}:n).immediate;function a(){clearTimeout(i)}var s=function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var u=function(){i=void 0,r||e.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(n)))},c=r&&!i;a(),i=window.setTimeout(u,t),c&&e.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(n)))};return s.cancel=a,s}(e,t),(0,o.__spreadArray)([t],(0,o.__read)(n)));return[r,r.cancel]}},757216:(e,t,n)=>{"use strict";n.d(t,{useReactionAnimation:()=>s});var o=n(570655),i=n(667294),r=n(723361),a=n(880001),s=function(e){var t=e.animationElem,n=e.animationURL,s=e.play,u=void 0===s||s,c=i.useRef(null),l=(0,o.__read)(i.useState((function(){return n&&(0,r.animationItemHasData)(n)})),2),d=l[0],v=l[1];return i.useEffect((function(){if(n){if(t.current){c.current=(0,r.getAnimation)(n,t.current);var e=function(){v(!0)};return(0,a.onAnimationReady)(c.current,e),function(){var t,n;!c.current||!c.current._cbs||(null===(t=c.current)||void 0===t||t.removeEventListener("DOMLoaded",e),null===(n=c.current)||void 0===n||n.destroy()),v(!1),c.current=null}}console.error(new Error("Missing animation container"))}else c.current=null}),[n,t]),i.useEffect((function(){var e,t;d&&(u?null===(e=c.current)||void 0===e||e.play():null===(t=c.current)||void 0===t||t.stop())}),[u,d]),{isAnimationReady:d}}},863233:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuSet:()=>r});var o=n(667294),i=n(353417),r=function(e){return o.useMemo((function(){return(0,i.getReactionSet)(e)}),[e])}},696540:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuButton:()=>p});var o=n(570655),i=n(667294),r=n(138201),a=n(315963),s=n(572635),u=n(383794),c=n(236538),l=n(533354),d=n(863233),v=n(105620),f=n(423777),p=function(e){var t=e.objectId,n=e.onReactionChoose,p=e.reactionButtonContainerElem,m=e.reactionIdInitial,g=e.reactionSetId,E=e.styleVariant,_=e.triggerMouseenterOnInitial,h=(0,s.useTooltipVisibility)(),b=h.isAllowedReenter,w=h.tooltipVisibility,y=h.triggerClose,R=(0,o.__read)(i.useState(m),2),C=R[0],I=R[1];i.useEffect((function(){var e=[(0,c.addReactionChooseListener)(t,(function(){y()})),(0,c.addDataUpdateListener)(t,(function(e){I(e.currentReactionId)}))];return function(){e.forEach((function(e){e()}))}}),[]);var S=(0,d.useReactionMenuSet)(g),T=(0,a.useReactionMenuConfig)(),P=i.useMemo((function(){var e;return null!==(e=null==S?void 0:S.items.map((function(e){return e.imageMenuURL})))&&void 0!==e?e:[]}),[null==S?void 0:S.id]);i.useEffect((function(){var e;S&&void 0!==C&&!(null===(e=S.items)||void 0===e?void 0:e.find((function(e){return e.id===C})))&&console.warn("Current reaction ID "+C+" is not found in set '"+g+"'")}),[S]);if(!S)return console.warn("ReactionsMenuButton init error, unavailable reaction set: "+g),null;var O={close:y,currentReactionId:C,onReactionChoose:function(e){(y(),e!==C)&&n(e)},reactionsOptions:S};return i.createElement(i.Fragment,null,i.createElement(v.ReactionsMenuTooltip,{delayShow:null==T?void 0:T.menuShowDelay,getAttachElem:function(e){if(e){var t=(0,f.getClosestLikeBtnContainerElem)(e);return t||(0,r.isDebugEnabled)()&&console.warn("ReactionsMenuButton missing attach target:",e),t}},isAllowedReenter:b,popup:l.ReactionsMenu,popupProps:O,reactionButtonContainer:p,styleVariant:E,triggerMouseenterOnInitial:_,visibility:w}),i.createElement(u.PreloadImages,{imageURLs:P}))}},105620:(e,t,n)=>{"use strict";n.d(t,{ReactionsMenuTooltip:()=>f});var o=n(570655),i=n(667294),r=n(692128),a=n(10246),s=n(356984),u=n(432793),c=n(572635),l=n(218643),d=["--post-padding-lr"],v=function(){var e=document.createElement("div");return e.setAttribute("aria-hidden","true"),e},f=function(e){var t=e.getAttachElem,n=e.initialIsOpen,f=void 0!==n&&n,p=e.isAllowedReenter,m=e.reactionButtonContainer,g=e.popup,E=e.popupProps,_=e.delayHide,h=void 0===_?r.HIDE_TOOLTIP_TIMEOUT:_,b=e.delayShow,w=void 0===b?r.SHOW_TOOLTIP_TIMEOUT:b,y=e.onOpenStateChange,R=e.onPopperVisibilityChange,C=e.styleVariant,I=e.triggerMouseenterOnInitial,S=void 0===I||I,T=e.visibility,P=void 0===T?c.TooltipVisibility.uncontrolled:T,O=void 0!==t,k=(0,o.__read)(i.useState(f),2),L=k[0],A=k[1],M=P!==c.TooltipVisibility.uncontrolled,N=(0,a.usePrevious)(P),B=i.useRef(null),x=i.useRef(null),D=i.useRef(null),U=(0,l.useCSSVarsPropagation)({elementWithPropsRef:x,properties:d}).style,j=i.useMemo((function(){var e;if(t)return t(null!==(e=D.current)&&void 0!==e?e:void 0)}),[t,D.current]),H=i.useCallback((function(e,t){!t&&M||A(e)}),[M]);i.useEffect((function(){null==y||y(L)}),[L]),i.useEffect((function(){L&&p&&(p.current=!0)}),[L]);var V=(0,u.useTooltipTrigger)({afterHide:H,afterShow:H,cancelCloseOnContentHover:p,delayHide:h,delayShow:w,ignoreMouseTriggers:M,popperPopupRef:B,reactionButtonContainer:m,triggerMouseenterOnInitial:S});return i.useEffect((function(){if(M){var e=P===c.TooltipVisibility.opened;return e||V.cancelDelayedOpening(),void A(e)}L&&N===c.TooltipVisibility.opened&&A(!1)}),[P,M]),i.createElement(s.TransitionPopper,{attachTarget:j,isOpen:L,content:g,contentProps:(0,o.__assign)((0,o.__assign)({},E),V.contentProps),mode:"side",onPopperVisibilityChange:R,position:"t",popperContentStyle:U,popperPopupRef:B,ref:O?D:x,renderNodeFactory:v,styleVariant:C},i.createElement("div",{className:"ReactionsMenuButtonPopperReference"}))}},356984:(e,t,n)=>{"use strict";n.d(t,{TransitionPopper:()=>d});var o=n(570655),i=n(667294),r=n(121265),a=n(429697),s=n(617841),u=n(483156),c=n(56751),l={appear:150,enter:150,exit:150},d=i.forwardRef((function(e,t){var n,d,v=e.attachTarget,f=e.isOpen,p=void 0!==f&&f,m=e.content,g=e.contentProps,E=e.onPopperVisibilityChange,_=e.popperContentStyle,h=e.popperPopupRef,b=e.styleVariant,w=(0,o.__rest)(e,["attachTarget","isOpen","content","contentProps","onPopperVisibilityChange","popperContentStyle","popperPopupRef","styleVariant"]),y=function(e){var t=(0,o.__read)(i.useState(!!e),2),n=t[0],r=t[1];return{isVisible:!!e||n,onEnter:i.useCallback((function(){r(!0)}),[]),onHidden:i.useCallback((function(){r(!1)}),[])}}(p),R=y.isVisible,C=y.onEnter,I=y.onHidden,S=i.useRef(null),T=(0,c.useCombinedRefs)(t,S),P=(0,u.usePopperTopAutoPosition)(null!==(n=S.current)&&void 0!==n?n:void 0,120,R),O=(d=i.useRef(!0),i.useEffect((function(){d.current=!1}),[]),d.current);i.useEffect((function(){O||null==E||E(R)}),[R]);var k=(0,r.classNames)("ReactionsMenuPopper _ReactionsMenuPopperRoot",{"ReactionsMenuPopper--alignType-post":"post"===b,"ReactionsMenuPopper--popperBottom":P===u.PopperVerticalPosition.BOTTOM,"ReactionsMenuPopper--popperTop":P===u.PopperVerticalPosition.TOP}),L=i.createElement(m,(0,o.__assign)({},g,{position:P})),A=i.createElement(a.default,{appear:!0,in:p,classNames:"ReactionsMenuPopperTransition",onEnter:C,onExited:I,timeout:l},i.createElement("div",{className:k,ref:h,style:_},L));return i.createElement(s.Popper,(0,o.__assign)({},w,{align:"left",attachTarget:v,content:A,open:R,position:P,ref:T}))}))},522494:(e,t,n)=>{"use strict";n.d(t,{ButtonStyleVariant:()=>o});var o={Post:"post",Reply:"reply"}},218643:(e,t,n)=>{"use strict";n.d(t,{useCSSVarsPropagation:()=>i});var o=n(667294),i=function(e){var t=e.elementWithPropsRef,n=e.properties;return(0,o.useMemo)((function(){var e=t.current;if(!e)return{style:{}};var o=window.getComputedStyle(e),i={};return n.forEach((function(e){var t=o.getPropertyValue(e);t&&(i[e]=t)})),{style:i}}),[t.current,n])}},483156:(e,t,n)=>{"use strict";n.d(t,{PopperVerticalPosition:()=>o,usePopperTopAutoPosition:()=>a});var o,i=n(667294),r=n(163131);!function(e){e.BOTTOM="b",e.TOP="t"}(o||(o={}));var a=function(e,t,n){return void 0===t&&(t=120),i.useMemo((function(){return function(e,t){void 0===t&&(t=120);var n=o.TOP;if(!e)return n;var i=(0,r.default)(e),a=window.pageYOffset||document.documentElement.scrollTop;return i.top-a<t?o.BOTTOM:n}(e,t)}),[e,t,n])}},315963:(e,t,n)=>{"use strict";n.d(t,{useReactionMenuConfig:()=>r});var o=n(667294),i=n(353417),r=function(){return(0,o.useMemo)((function(){return(0,i.getReactionConfig)()}),[])}},432793:(e,t,n)=>{"use strict";n.d(t,{useTooltipTrigger:()=>r});var o=n(728542),i=n(667294),r=function(e){var t=e.afterHide,n=e.afterShow,r=e.cancelCloseOnContentHover,a=e.delayHide,s=void 0===a?0:a,u=e.delayShow,c=void 0===u?0:u,l=e.ignoreMouseTriggers,d=void 0!==l&&l,v=e.reactionButtonContainer,f=e.popperPopupRef,p=e.triggerMouseenterOnInitial,m=i.useRef(null),g=i.useRef(void 0),E=i.useRef(void 0),_=i.useCallback((function(){var e;window.clearTimeout(null!==(e=g.current)&&void 0!==e?e:void 0)}),[]),h=i.useCallback((function(){_(),null==n||n(!1)}),[n]),b=i.useCallback((function(){_(),null==n||n(!0)}),[n]);(0,o.useOnClickOutside)(f,h),i.useEffect((function(){return function(){window.clearTimeout(g.current),window.clearTimeout(E.current)}}),[]);var w=function(e){return window.setTimeout((function(){null==t||t(!1)}),null!=e?e:0)},y=function(){var e,t;(window.clearTimeout(null!==(e=E.current)&&void 0!==e?e:void 0),d)||(g.current=(t=c,window.setTimeout((function(){b()}),null!=t?t:0)))},R=function(e){var t,n;if(window.clearTimeout(null!==(t=g.current)&&void 0!==t?t:void 0),!d){e.relatedTarget instanceof HTMLElement&&(null===(n=null==m?void 0:m.current)||void 0===n?void 0:n.contains(e.relatedTarget))||(E.current=w(s))}};return i.useEffect((function(){p&&y()}),[]),i.useEffect((function(){return null==v||v.addEventListener("mouseenter",y,{passive:!0}),null==v||v.addEventListener("mouseleave",R,{passive:!0}),function(){null==v||v.removeEventListener("mouseenter",y),null==v||v.removeEventListener("mouseleave",R)}}),[v]),{cancelDelayedOpening:_,contentProps:{ref:m,onMouseEnter:function(){var e;window.clearTimeout(null!==(e=E.current)&&void 0!==e?e:void 0),(null==r?void 0:r.current)&&b()},onMouseLeave:function(e){d||v&&e.target instanceof HTMLElement&&v.contains(e.target)||(E.current=w(s))}}}}},572635:(e,t,n)=>{"use strict";n.d(t,{TooltipVisibility:()=>o,useTooltipVisibility:()=>a});var o,i=n(570655),r=n(667294);!function(e){e.closed="closed",e.opened="opened",e.uncontrolled="uncontrolled"}(o||(o={}));var a=function(){var e=(0,i.__read)(r.useState(o.uncontrolled),2),t=e[0],n=e[1],a=r.useRef(!0),s=r.useCallback((function(e){void 0===e&&(e=!1),t!==o.closed&&(void 0!==e&&(a.current=e),n(o.closed),window.setTimeout((function(){n(o.uncontrolled)})))}),[]);return{isAllowedReenter:a,tooltipVisibility:t,setTooltipVisibility:n,triggerClose:s}}},532054:(e,t,n)=>{"use strict";n.d(t,{renderPreviewItems:()=>d});var o=n(570655),i=n(754),r=n(121265),a=n(414914),s=n(428817),u=n.n(s),c=n(522494),l=n(353417),d=function(e,t,n,s,d){var v=function(e,t,n){var r,a;void 0===n&&(n=!1);var s=[];try{for(var u=(0,o.__values)(Object.keys(e)),c=u.next();!c.done;c=u.next()){var l=c.value,d=(0,i.parseReactionId)(l);d.isValid&&e[d.value]>0&&s.push(d.value)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}return s=s.sort((function(t,n){return(e[n]||0)-(e[t]||0)})).slice(0,t),n&&s.reverse(),s}(t,3),f=e.querySelector(".ReactionsPreview__items"),p=(0,l.getReactionSet)(n),m=0===(0,i.calcCountersSum)(t),g=u().reactions_preview_item;f&&p&&"string"==typeof g?(f.innerHTML=v.map((function(e){var t=p.itemsById[e];if(!t)return"";var n=(0,r.classNames)({"ReactionsPreviewItem--lite ReactionsPreviewItem--stackOverlayLite":d===c.ButtonStyleVariant.Reply,"ReactionsPreviewItem--post ReactionsPreviewItem--stackOverlayPost":d===c.ButtonStyleVariant.Post});return(0,a.rs)(g,{image_url:t.imagePreviewURL,title:t.title,class:n})})).join(""),e.classList.toggle("ReactionsPreview--empty",m),e.classList.toggle("ReactionsPreview--active",void 0!==s)):console.warn("Unable to render reaction previews",{itemsContainer:f,previewItemTemplate:g,reactionSet:p})}},431700:(e,t,n)=>{"use strict";n.d(t,{SUPPORTED_OBJECT_TYPES:()=>o,SIZE_MENU:()=>i,SIZE_PREVIEW:()=>r,REACTIONS_COUNTS_RESPONSE_FIELD:()=>a});var o={wall:"wall",wall_reply:"wall_reply"},i={width:96,height:96},r={width:32,height:32},a="reactions_counts"},859878:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonMount:()=>f});var o=n(667294),i=n(973935),r=n(832626),a=n(138201),s=n(162481),u=n(696540),c=n(236538),l=n(522494),d=n(423777),v=l.ButtonStyleVariant.Post,f=function(e,t){var n;if(void 0===t&&(t={}),!("__isMounted"in e)){var l=(0,d.getMenuMount)(e),f=(0,s.reactionsElemPayload)(e);if(l&&(null==f?void 0:f.objectRaw)){var p=f.csrfHash,m=f.objectRaw,g=f.reactionSetId,E=f.styleVariant,_=void 0===E?v:E,h=f.userReactionId;p||console.warn("Missing reactions csrf hash"),(0,a.isDebugEnabled)()&&console.log("Init reactions button",m,g);i.render(o.createElement(u.ReactionsMenuButton,{objectId:m,onReactionChoose:function(t){var n=(0,s.reactionsElemPayload)(e);p&&n&&((0,c.emitReactionChoose)(m),(0,r.reactionButtonSetReaction)(t,n.userReactionId,m,p,e))},reactionButtonContainerElem:e,reactionIdInitial:h,reactionSetId:g,styleVariant:_,triggerMouseenterOnInitial:!!t.isMouseenterEvent}),l),null===(n=window.cur.destroy)||void 0===n||n.push((function(){l&&(i.unmountComponentAtNode(l),delete e.__isMounted)})),e.__isMounted=!0}else(0,a.isDebugEnabled)()&&console.error("Init reactions button failed",l,f)}}},832626:(e,t,n)=>{"use strict";n.d(t,{reactionButtonSetReaction:()=>p});var o=n(570655),i=n(457700),r=n(353417),a=n(683393),s=n(68482),u=n(598258),c=n(138201),l=n(236538),d=n(162481),v=n(10246),f=function(e,t){var n=t.counts,o=t.isFromWkLayer,i=t.isPrimaryLikeButtonClick,s=t.isUserAction,u=void 0!==s&&s,c=t.objectRaw,v=t.reactionId,f=t.reactionSetId,p=t.withoutPreview,m=(0,r.getReactionSet)(f);m&&(0,d.updateReactionButton)(e,v,m,u,n),(0,d.setDataCurrentId)(e,v),(0,l.emitDataUpdate)(c,{currentReactionId:v}),n&&(0,a.triggerReactionsUpdate)(c,n,{id:v},{isFromWkLayer:o,isPrimaryLikeButtonClick:i,isUserAction:u,isWithoutPreview:p})},p=function(e,t,n,r,a,l){if((0,c.isDebugEnabled)()&&console.log("Change reaction for object "+n+": "+e),(0,v.isValidEnvironment)()){var p=(0,d.reactionsElemPayload)(a),m=null==p?void 0:p.counts,g=function(e,t,n){var i=(0,o.__assign)({},e);return void 0!==t&&(i[t]=(i[t]||0)+1),void 0!==n&&(i[n]=Math.max(0,(i[n]||0)-1)),i}((null==p?void 0:p.counts)||(0,i.reactionCountsBrandWrap)({}),e,t),E=null==l?void 0:l.isPrimaryLikeButtonClick,_=(0,s.isWkLayerWallPostOpen)(),h=!0===(null==p?void 0:p.withoutPreview);p&&f(a,{counts:g,isFromWkLayer:_,isPrimaryLikeButtonClick:E,isUserAction:!0,objectRaw:n,reactionId:e,reactionSetId:p.reactionSetId,withoutPreview:h}),(0,u.requestPostReactionSet)(e,n,r).promise.then((function(e){var t=(0,u.validateLikesChangeResponse)(e),o=null==t?void 0:t.userReaction;t&&void 0!==o&&p&&f(a,{counts:t.counts,isFromWkLayer:_,isPrimaryLikeButtonClick:!1,objectRaw:n,reactionId:o.id,reactionSetId:p.reactionSetId,withoutPreview:h})}),(function(e){(null==e?void 0:e.isAborted)||p&&f(a,{counts:m,isFromWkLayer:_,isPrimaryLikeButtonClick:!1,objectRaw:n,reactionId:t,reactionSetId:p.reactionSetId,withoutPreview:h})}))}}},723361:(e,t,n)=>{"use strict";n.d(t,{animationItemHasData:()=>s,getAnimation:()=>u});var o=n(401346),i=n(880001),r=(0,n(257451).makeSharedState)("reactions-animations-storage",(function(){return{animationItemsData:new Map}})),a=function(){return r().animationItemsData},s=function(e){return a().has(e)},u=(0,i.getAnimation)({animationItemGet:function(e){var t=e.animationId;return a().get(t)},animationItemSet:function(e){var t=e.animationId,n=e.loadedAnimationData;a().set(t,n)},loadAnimation:(0,i.loadAnimation)(o.default)})},598258:(e,t,n)=>{"use strict";n.d(t,{requestPostReactionSet:()=>l,validateLikesChangeResponse:()=>d});var o=n(994356),i=n(754),r=n(64385),a=n(883011),s=n(431700),u=n(523845),c=(0,o.makePendingRequestState)(),l=function(e,t,n,o){var i,s;(null===(i=null==o?void 0:o.abortPendingRequests)||void 0===i||i)&&c.cancel(t);var l={act:"a_set_reaction",object:t,reaction_id:e,hash:n,wall:2,from:null===(s=window.Likes)||void 0===s?void 0:s._getReference(t)},d=new a.AjaxCancellationToken,v=new Promise((function(e,t){var n=r.ajax.post("like.php",l,{cancellationToken:d,onDone:function(n){if(null==n?void 0:n.unauth_action_box)return u.UnauthActionBox.show(n.unauth_action_box),void t();e(n)},onFail:function(e){var o=function(e){return"object"==typeof(t=e)&&null!==t&&"readyState"in t&&0===e.readyState;var t}(n);return t({err:e,isAborted:o}),!!o}})})),f=function(){d.cancel()},p=c.register(t,f);return v.catch((function(){})).finally((function(){p&&p()})),{abort:f,promise:v}},d=function(e){var t;if(void 0!==(null==e?void 0:e.reactions_my)){var n=null!==(t=null==e?void 0:e[s.REACTIONS_COUNTS_RESPONSE_FIELD])&&void 0!==t?t:void 0,o=e.reactions_my,r=void 0;return null===o?r={id:void 0}:(0,i.isValidReactionId)(o)&&(r={id:o}),{counts:n,userReaction:r}}console.warn("Invalid reaction change response format",e)}},138201:(e,t,n)=>{"use strict";n.d(t,{isDebugEnabled:()=>o.isDebugEnabled,ENABLED_IN_POST_REPLY:()=>i});var o=n(509723),i=!1},223625:(e,t,n)=>{"use strict";n.d(t,{getCounterForTitle:()=>r,isCounterEnabled:()=>a,isCounterAvailable:()=>s});var o=n(754),i=n(116886);function r(e,t,n,r){if(!!!e.getAttribute("data-reaction-button-text-is-counter"))return{kind:"disabled"};if(!n)return{kind:"error"};var a=0!==(r?(0,o.calcCountersSum)(r):0);if(!(0,o.hasReactionsForCounts)(n))return{kind:"enabled",allowZeroAnimation:a,buttonText:""};var s=(0,o.calcCounters)(n,t),u=(0,o.calcCountersWeightedSum)(s);return{kind:"enabled",allowZeroAnimation:a,buttonText:(0,i.langNumeric)(u,"%s",!0)}}function a(e){return!!e&&"disabled"!==e.kind}function s(e){return"enabled"===e.kind}},236538:(e,t,n)=>{"use strict";n.d(t,{addDataUpdateListener:()=>a,emitDataUpdate:()=>s,addReactionChooseListener:()=>u,emitReactionChoose:()=>c});var o=n(970793),i=void 0,r=function(){return i=i||new o.default},a=function(e,t){var n,o=r(),i=((n={})[e+":data_update"]=t,n);return o.addListeners(i),function(){o.removeListeners(i)}},s=function(e,t){r().emit(e+":data_update",t)},u=function(e,t){var n,o=r(),i=((n={})[e+":reaction_choose"]=t,n);return o.addListeners(i),function(){o.removeListeners(i)}},c=function(e){r().emit(e+":reaction_choose")}},162481:(e,t,n)=>{"use strict";n.d(t,{reactionsElemPayload:()=>R,setDataCurrentId:()=>C,updateReactionButton:()=>O,getLastOwnReactionChangeTime:()=>k,shouldReactionsPreviewBeVisible:()=>L,updateReactionsPreview:()=>M,updateReactionsButtonForCounts:()=>N});var o=n(570655),i=n(522414),r=n(223625),a=n(917999),s=n(920453),u=n(754),c=n(414914),l=n(190148),d=n(116886),v=n(723361),f=n(353417),p=n(423777),m=n(10246),g=n(532054),E=n(880001),_=n(509723),h="data-reaction-user-reaction-id",b="data-reaction-last-own-change-time",w="PostButtonReactions__icon--animationActive";var y=function(e){var t=e.getAttribute("data-reaction-counts");if(null===t)return{};var n=t?(0,s.parseJSON)(t):void 0;return"object"==typeof n&&null!==n?n:void 0},R=function(e){var t=e.getAttribute("data-reaction-target-object"),n=e.getAttribute("data-reaction-hash"),o=e.getAttribute("data-reaction-set-id");if(null!==o){var i=e.getAttribute(h),r=i?(0,u.parseReactionIdOrUnset)(i):void 0,a=e.getAttribute("data-reaction-style-variant"),s=a&&(0,m.isValidButtonStyleVariant)(a)?a:void 0,c=!!e.getAttribute("data-reaction-without-preview");return{counts:y(e),csrfHash:n,objectRaw:t,reactionSetId:o,styleVariant:s,userReactionId:r,withoutPreview:c}}},C=function(e,t){e.setAttribute(h,void 0===t?"":String(t))},I=function(e){var t,n=null===(t=e.__reactionIconAnimation)||void 0===t?void 0:t.animationItem;n&&(!n._cbs||n.destroy(),delete e.__reactionIconAnimation)},S=function(e,t,n,o){var i;if(!(e!==(null===(i=n.__reactionIconAnimation)||void 0===i?void 0:i.animationURL))&&e||(I(n),t.innerHTML="",n.classList.remove(w)),o&&e){var r=(0,v.getAnimation)(e,t,{loadAnimationParams:{autoplay:!0,loop:!1}});(0,E.onAnimationReady)(r,(function(){n.classList.add(w)}));r.addEventListener("complete",(function(){var e;!0===(null==(e=(0,f.getReactionConfig)())?void 0:e.animationShowStaticAfterEnd)&&(n.classList.remove(w),I(n))})),n.__reactionIconAnimation={animationItem:r,animationURL:e}}},T=function(e,t,n,o){var i=e.querySelector('[data-section-ref="reactions-button-icon"]');if(i){if(t){var r=null==t?void 0:t.imageMenuURL;i.style.backgroundImage="url('"+r+"')",i.setAttribute("aria-label",null==t?void 0:t.title)}else i.style.backgroundImage="",(null==n?void 0:n.title)&&i.setAttribute("aria-label",null==n?void 0:n.title);i.classList.toggle("PostButtonReactions__icon--custom",!!t);var a=null==t?void 0:t.animationURL,s=function(e){var t=e.querySelector(".PostButtonReactions__iconAnimation");return t||(t=(0,c.se)('<div class="PostButtonReactions__iconAnimation" data-section-ref="reactions-button-icon-animation"></div>'),e.appendChild(t),t)}(i);S(a,s,i,o)}},P=function(e,t,n,o){e.classList.toggle("PostBottomAction--empty",o),e.classList.toggle("PostButtonReactions--icon-active",t),e.classList.toggle("PostButtonReactions--active",t)},O=function(e,t,n,a,s){var c,v=null===(c=R(e))||void 0===c?void 0:c.counts,f=!(0,u.isReactionIdUnset)(t),m=!s||!(0,u.hasReactionsForCounts)(s),g=(0,u.getDefaultReaction)(n),E=void 0;if(void 0===t||(E=n.itemsById[t])){T(e,E,g,a);var h=(0,r.getCounterForTitle)(e,n,s,v);if(function(e,t,n,a){var s=e.querySelector('[data-section-ref="reactions-button-title"]');if(s){var u=null==a?void 0:a.counterForTitle,c=null==t?void 0:t.titleColor,v=null==t?void 0:t.backgroundColor,f=c?{"--reaction-button-title-color-light":c.light,"--reaction-button-title-color-dark":c.dark}:{"--reaction-button-title-color-light":null,"--reaction-button-title-color-dark":null},p=v?{"--reaction-button-background-color-light":v.light,"--reaction-button-background-color-dark":v.dark}:{"--reaction-button-background-color-light":null,"--reaction-button-background-color-dark":null},m=(0,o.__assign)((0,o.__assign)({},f),p);Object.entries(m).forEach((function(t){var n=(0,o.__read)(t,2),i=n[0],r=n[1];e.style.setProperty(i,r)}));var g=!!t,E=!1;if((0,r.isCounterEnabled)(u)){if((0,r.isCounterAvailable)(u)){var h=u.buttonText;(0,l.animateCount)(s,h,{allowZero:u.allowZeroAnimation,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0}),E=!0}}else{var b=g?null==t?void 0:t.title:null==n?void 0:n.title;b&&(s.innerText=b,E=!0)}!E&&(0,_.isDebugEnabled)()&&console.log("reactions: setReactionTitle: missing title",g,t,n,u);var w="";w=g?(0,i.langReplace)((0,d.getLang)("reactions_button_unset_reaction_title")||"",{reaction_name:(null==t?void 0:t.title)||""}):(0,i.langReplace)((0,d.getLang)("reactions_button_set_reaction_with_name")||"",{reaction_name:(null==n?void 0:n.title)||""})||(0,d.getLang)("reactions_button_title")||"",e.setAttribute("aria-label",w||"")}}(e,E,g,{counterForTitle:h}),s&&(0,r.isCounterEnabled)(h))!function(e,t){var n,o=null===(n=(0,p.getClosestLikeBtnContainerElem)(e))||void 0===n?void 0:n.querySelector('[data-section-ref="reactions-button-screen-reader-counter"]');if(o){var i=(0,d.langNumeric)(t,(0,d.getLang)("reactions_n_reacted","raw")||"%s",!0);o.innerText=i}}(e,(0,u.calcCountersSum)(s));P(e,f,0,m),a&&function(e,t){e.setAttribute(b,String(t))}(e,Date.now())}else console.error(new Error("Missing reaction meta for "+t+" in set '"+n.id+"'"))},k=function(e){var t=e.getAttribute(b);if(t&&(0,a.isNumeric)(t))try{return new Date(Number.parseInt(t)).getTime()||void 0}catch(e){return void console.error(e)}};var L=function(e){return(0,u.hasReactionsForCounts)(e)},A=function(e,t){var n=t.counts,o=t.countsPrevious,i=t.objectRaw,r=t.reactionId,a=t.reactionSetId,s=t.styleVariant,c=(0,f.getReactionSet)(a),v=(0,u.calcCounters)(n,c),m=(0,u.calcCountersWeightedSum)(v),E=(0,u.calcCountersSum)(n),_=o?(0,u.calcCountersSum)(o):0,h=(0,p.getPreviewElem)(i);h&&((0,g.renderPreviewItems)(h,n,a,r,s),function(e,t,n,o){var i,r,a=(0,d.langNumeric)(n,(0,d.getLang)("reactions_n_reacted","raw")||"%s",!0);e.setAttribute("aria-label",a);var s=function(e){var t;return null!==(t=e.querySelector('[data-section-ref="like-button-count"]'))&&void 0!==t?t:void 0}(e);if(s){e.tt&&"object"==typeof e.tt&&(e.tt.shown||e.tt.showing||null===(r=null===(i=e.tt)||void 0===i?void 0:i.destroy)||void 0===r||r.call(i));var u=(0,d.langNumeric)(t,"%s",!0);(0,l.animateCount)(s,u,{allowZero:0!==o,str:!0,noWrapWidth:!0,noSpaceIfEmpty:!0})}}(h,m,E,_))},M=function(e,t){var n=(0,p.getLikeBtnElem)(e),o=t.counts;n&&o?function(e,t){var n=R(e);n&&n.objectRaw&&A(0,{counts:t,countsPrevious:n.counts,objectRaw:n.objectRaw,reactionId:n.userReactionId,reactionSetId:n.reactionSetId,styleVariant:n.styleVariant})}(n,o):console.warn("Unable to update object reactions",{objectRaw:e,options:t})},N=function(e,t){var n=t.counts,o=(0,p.getLikeBtnElem)(e);o&&function(e,t){e.setAttribute("data-reaction-counts",JSON.stringify(t))}(o,n)}},228385:(e,t,n)=>{"use strict";n.d(t,{init:()=>d,ReactionsEntryGlobal:()=>v});var o=n(917685),i=n(859878),r=n(476598),a=n(107553),s=n(133031),u=n(966693),c=n(353417),l=n(529821),d=function(){(0,l.postRenderReactionsInit)(),(0,u.initResponseHandlers)(),(0,s.initOnboardingTooltipHandlers)()},v={onReactionKeyDown:function(e,t){(0,r.isEventFromMenu)(t)||[o.KEY.RETURN,o.KEY.SPACE].includes(t.keyCode)&&(t.stopPropagation(),(0,r.toggleReactionOnClick)(e))},onReactionMouseEnter:function(e,t){t.target===e&&(0,a.reactionsButtonInit)(e,{isMouseenterEvent:!0})},onReactionClick:function(e,t){(0,o.checkEvent)(t)||(0,r.isEventFromMenu)(t)||((0,r.toggleReactionOnClick)(e),(0,a.reactionsButtonInit)(e))},reactionsButtonMount:i.reactionsButtonMount,storageAddSets:c.storageAddSets,storageSetConfig:c.storageSetConfig}},476598:(e,t,n)=>{"use strict";n.d(t,{isEventFromMenu:()=>s,toggleReactionOnClick:()=>u});var o=n(692128),i=n(832626),r=n(236538),a=n(162481),s=function(e){var t,n;return e.target instanceof HTMLElement&&(null===(n=(t=e.target).closest)||void 0===n?void 0:n.call(t,"._ReactionsMenuPopperRoot"))},u=function(e){var t=(0,a.reactionsElemPayload)(e);if(null==t?void 0:t.objectRaw){var n=t.csrfHash,s=t.objectRaw,u=t.userReactionId;if((0,r.emitReactionChoose)(s),n){var c=void 0===u?o.REACTION_ID_DEFAULT:void 0;(0,i.reactionButtonSetReaction)(c,u,s,n,e,{isPrimaryLikeButtonClick:!0})}else console.warn("Missing reactions csrf hash",e)}else console.warn("Missing reactions object raw",e)}},633819:(e,t,n)=>{"use strict";n.d(t,{helpHintTooltipReactions:()=>a,propagateCloseToOtherTabs:()=>s});var o=n(570655),i=n(64385),r=n(45150),a=function(e,t,n){var a,s,u,c;void 0===n&&(n={});var l=!1,d=!1,v=function(e){var n,o=(void 0===e?{}:e).hideHintOnServer;l||(l=!0,void 0!==o&&o&&(d||(d=!0,i.ajax.post("al_index.php",{act:"help_hints_hide",hash:t.helpHintHash,hint_id:t.helpHintId})),null===(n=t.onHideRequestSent)||void 0===n||n.call(t)))},f=function(){d=!0,null==c||c.hide()},p={autoShow:!1,cls:"feature_intro_tt feature_intro_blue_tt feature_intro_blue_tt--heightSmall feature_info_tooltip",content:t.content,noAutoHideOnWindowClick:!0,onDestroy:function(){v({hideHintOnServer:!0})},onFirstTimeShow:function(e){var t;e instanceof HTMLElement&&(null===(t=e.querySelector(".feature_tooltip__close"))||void 0===t||t.addEventListener("click",(function(){null==c||c.hide()})))},onHide:function(){null==c||c.destroy()},width:230},m=(0,o.__assign)((0,o.__assign)({},p),n);return c=new r.default(e,m),null===(u=null===(s=null===(a=window.cur)||void 0===a?void 0:a.destroy)||void 0===s?void 0:s.push)||void 0===u||u.call(s,(function(){f()})),{hideClientOnly:f,tooltip:c}},s=function(e){var t,n,o,i=e.helpHintId,r=e.onHideFromOtherTab,a="help_hint:"+i,s=function(e){if("visible"!==document.visibilityState&&e.storageArea===window.localStorage&&e.key===a&&"1"===e.newValue){r(),u();try{localStorage.removeItem(a)}catch(e){console.error(e)}}};function u(){window.removeEventListener("storage",s)}window.addEventListener("storage",s);return null===(o=null===(n=null===(t=window.cur)||void 0===t?void 0:t.destroy)||void 0===n?void 0:n.push)||void 0===o||o.call(n,(function(){u()})),{sendEventHintHidden:function(){!function(e,t){try{localStorage.setItem(e,t)}catch(e){console.error(e)}setTimeout((function(){try{localStorage.removeItem(e)}catch(e){console.error(e)}}),100)}(a,"1"),u()}}}},107553:(e,t,n)=>{"use strict";n.d(t,{reactionsButtonInit:()=>i});var o=n(570655),i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=window.Reactions;n?n.reactionsButtonMount.apply(n,(0,o.__spreadArray)([],(0,o.__read)(e))):window.stManager.add([window.jsc("web/reactions.js"),"reactions.css"]).then((function(){window.Reactions?i.apply(void 0,(0,o.__spreadArray)([],(0,o.__read)(e))):console.error("Reactions module is unavailable")}))}},509698:(e,t,n)=>{"use strict";n.d(t,{reactionLogError:()=>r});var o=n(956146),i=n(353417),r=function(e){var t,n=e.error,r=(0,i.getReactionConfig)(),a=null!==(t=null==r?void 0:r.reportJsErrors)&&void 0!==t&&t;(0,o.reactionLogError)({error:n,reportError:a})}},133031:(e,t,n)=>{"use strict";n.d(t,{initOnboardingTooltipHandlers:()=>m});var o=n(128533),i=n(633819),r=n(45150),a=n(423777),s=n(95402),u=n(283767),c=n(509723),l=n(754),d=n(509698),v=function(e){return"string"==typeof e&&!!e},f=function(e){var t=e.payload;(0,c.isDebugEnabled)()&&console.log("Reactions post button onboarding tooltip init",t);var n,o=t.target,a=t.data,s=a||{},u=s.content,l=s.helpHintHash,f=s.helpHintId;if(!(o&&v(u)&&v(l)&&v(f))){var p=new Error("Invalid reactions tooltip onboarding data");return(0,d.reactionLogError)({error:p}),void console.error(p,o,a)}var m=(0,i.helpHintTooltipReactions)(o,{content:u,helpHintHash:l,helpHintId:f,onHideRequestSent:function(){null==n||n()}},{align:r.default.ALIGN_CENTER,appendToParent:!0,autoAdjustToViewport:!1,forceSide:"right",offset:[5,0],type:r.default.TYPE_HORIZONTAL,withCloseButton:!1}),g=m.tooltip,E=m.hideClientOnly;o.addEventListener("mouseenter",(function(){g.hide()}),{once:!0}),window.requestAnimationFrame((function(){g.show()}));var _=(0,i.propagateCloseToOtherTabs)({helpHintId:f,onHideFromOtherTab:E}).sendEventHintHidden;n=_},p=function(e){var t=e.payload;(0,c.isDebugEnabled)()&&console.log("Reactions post preview onboarding tooltip init",t);var n=t.target,o=t.data,f=o||{},p=f.autoShowOnStart,m=void 0!==p&&p,g=f.content,E=f.helpHintHash,_=f.helpHintId;if(!(n&&v(g)&&v(E)&&v(_))){var h=new Error("Invalid reactions preview tooltip onboarding data");return(0,d.reactionLogError)({error:h}),void console.error(h,n,o)}var b=[],w=function(){b.forEach((function(e){e()}))},y=function(e){var t=e.targetElem,n=(0,i.helpHintTooltipReactions)(t,{content:g,helpHintHash:E,helpHintId:_,onHideRequestSent:w},{align:r.default.ALIGN_CENTER,autoAdjustToViewport:!1,forceSide:"right",offset:[8,0],type:r.default.TYPE_HORIZONTAL,withCloseButton:!1}),o=n.tooltip,a=n.hideClientOnly;t.addEventListener("mouseenter",(function(){o.hide()}),{once:!0}),o.show();var s=(0,i.propagateCloseToOtherTabs)({helpHintId:_,onHideFromOtherTab:a}).sendEventHintHidden;b.push(s)};if(m)window.requestAnimationFrame((function(){y({targetElem:n})}));else{var R=void 0;R=(0,s.registerUniqueListener)("reactions-preview-onboarding-tooltip",s.WallDataEvents.post_reactions_counts_update,(function(e){if(e.isUserAction&&e.reactionIdState&&!(0,l.isReactionIdUnset)(e.reactionIdState.reactionId)){var t=(0,u.likePostObjectId)(e.postFullId),n=(0,a.getPreviewElem)(t);if(n)y({targetElem:n}),null==R||R();else{var o=new Error("Reactions preview tooltip onboarding: preview elem is unavailable");console.error(o,e)}}}))}},m=function(){(0,o.tq)().setStartupHandler("Wall/reactions_onboarding_tooltip",f,!0),(0,o.tq)().setStartupHandler("Wall/reactions_preview_onboarding_tooltip",p,!0)}},966693:(e,t,n)=>{"use strict";n.d(t,{initResponseHandlers:()=>u});var o=n(541575),i=n(353417),r=function(e){var t=null==e?void 0:e.reaction_sets;t&&(0,i.storageAddSets)(t)},a=function(e){e&&(0,i.storageSetConfig)(e)},s=!1,u=function(){s||((0,o.replaceExtraHandler)("reactionsConfig",a),(0,o.replaceExtraHandler)("reactions",r),s=!0)}},423777:(e,t,n)=>{"use strict";n.d(t,{getLikeBtnElem:()=>o,getClosestLikeBtnContainerElem:()=>i,getLikeWrap:()=>r,getMenuMount:()=>a,getPreviewElem:()=>s});var o=function(e){var t;return null!==(t=document.querySelector('[data-section-ref="reactions-button"][data-reaction-target-object="'+e+'"]'))&&void 0!==t?t:void 0},i=function(e){var t;return null!==(t=e.closest('[data-section-ref="reactions-button-container"]'))&&void 0!==t?t:void 0},r=function(e){var t,n=o(e);if(n)return null!==(t=n.closest(".like_wrap"))&&void 0!==t?t:void 0},a=function(e){var t,n;return null!==(n=null===(t=e.closest('[data-section-ref="reactions-button-container"]'))||void 0===t?void 0:t.querySelector('[data-section-ref="reactions-menu-mount"]'))&&void 0!==n?n:null},s=function(e){return document.querySelector('[data-section-ref="reactions-preview-items"][data-reaction-target-object="'+e+'"]')}},353417:(e,t,n)=>{"use strict";n.d(t,{storageAddSets:()=>v,getReactionSet:()=>f,storageSetConfig:()=>p,getReactionConfig:()=>m});var o=n(570655),i=n(358862),r=n(754),a=n(257451),s=n(509698),u=n(431700),c=n(138201),l=(0,a.makeSharedState)("reactions-storage",(function(){return new Map})),d=(0,a.makeSharedState)("reactions-config",(function(){return{config:void 0}})),v=function(e){(0,c.isDebugEnabled)()&&console.log(e),Object.entries(e).forEach((function(e){var t=(0,o.__read)(e,2),n=t[0],a=t[1],c=(0,r.validateReactionSetPayloaditems)(a,n);if(c)(0,s.reactionLogError)({error:c.error});else{var d=a.map((function(e){return(0,o.__assign)((0,o.__assign)({},e),{title:(0,i.decodeHTMLEntities)(e.title)})}));l().set(n,(0,r.prepareReactionMenuSet)(n,d,{imageMenuSize:u.SIZE_MENU,imagePreviewSize:u.SIZE_PREVIEW}))}}))},f=function(e){var t=l().get(e);if(t)return t;var n=new Error("Reaction set not found: "+e);(0,s.reactionLogError)({error:n})},p=function(e){(0,c.isDebugEnabled)()&&console.log(e);var t=(0,r.parseReactionMenuConfig)(e);t?d().config=t:console.warn("Reactions: invalid menu config passed",e)},m=function(){var e;return null===(e=d())||void 0===e?void 0:e.config}},10246:(e,t,n)=>{"use strict";n.d(t,{isValidEnvironment:()=>r,preloadImage:()=>a,usePrevious:()=>s,isValidButtonStyleVariant:()=>c});var o=n(522494),i=n(667294),r=function(){var e,t,n;return"function"==typeof(null===(e=window.cur)||void 0===e?void 0:e.viewAsBox)?(window.cur.viewAsBox(),!1):!(window.vk.widget&&!window.vk.id)||(null===(n=null===(t=window.Widgets)||void 0===t?void 0:t.oauth)||void 0===n||n.call(t),!1)},a=function(e){return new Promise((function(t,n){var o=new Image;o.src=e,o.onload=function(){return t()},o.onerror=function(){return n()}}))},s=function(e){var t=i.useRef(e);return i.useEffect((function(){t.current=e})),t.current},u=Object.values(o.ButtonStyleVariant),c=function(e){return u.includes(e)}},683393:(e,t,n)=>{"use strict";n.d(t,{triggerReactionsUpdate:()=>a});var o=n(283767),i=n(431700),r=n(406108),a=function(e,t,n,a){var s=(0,o.parseLikeObjectId)(e);s&&s.objectType===i.SUPPORTED_OBJECT_TYPES.wall&&s.objectId?(0,r.emitEvent)(r.WallDataEvents.post_reactions_counts_update,{counts:t,isFromWkLayer:null==a?void 0:a.isFromWkLayer,isPrimaryLikeButtonClick:null==a?void 0:a.isPrimaryLikeButtonClick,isQueueUpdate:null==a?void 0:a.isQueueUpdate,isUserAction:null==a?void 0:a.isUserAction,isWithoutPreview:null==a?void 0:a.isWithoutPreview,postFullId:s.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):s&&s.objectType===i.SUPPORTED_OBJECT_TYPES.wall_reply&&s.objectId?(0,r.emitEvent)(r.WallDataEvents.reply_reactions_counts_update,{counts:t,replyFullId:s.objectId,reactionIdState:n?{reactionId:n.id}:void 0}):console.warn("Unsupported reactions object update",e)}},529821:(e,t,n)=>{"use strict";n.d(t,{postRenderReactionsInit:()=>h});var o=n(570655),i=n(414914),r=n(59727),a=n(283767),s=n(138201),u=n(162481),c=n(423777),l=n(157420),d=n(95402),v=n(224298),f=n(68482),p=function(e,t,n){var o;void 0===n&&(n=null===(o=window.cur)||void 0===o?void 0:o.wallTpl);var a=null==n?void 0:n[e];if(a)return(0,r.stripPercentVars)((0,i.rs)(a,t));console.warn("renderTemplate: missing template '"+e+"'",n)},m=function(e){for(var t=e.isUserAction,n=void 0!==t&&t,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];n?console.error.apply(console,(0,o.__spreadArray)([],(0,o.__read)(i))):(0,s.isDebugEnabled)()&&console.warn.apply(console,(0,o.__spreadArray)([],(0,o.__read)(i)))},g=function(e,t,n){var o,r,a=n.isActionStatusBarVisible,s=n.isReactionsPreviewVisible,u=n.positionTrackingEnd;if(!t.isWithoutPreview){var d=function(e,t){var n,o,r=(0,c.getLikeWrap)(e);if(r){var a=(0,l.getPostElem)(t,r),s=null==a?void 0:a.querySelector('[data-section-ref="post-action-status-bar"]');if(s)return{actionStatusBar:s};var u=(0,f.isWkLayerWallPostOpen)()?null===(n=window.wkcur)||void 0===n?void 0:n.wallTpl:null===(o=window.cur)||void 0===o?void 0:o.wallTpl,d=(0,i.se)(p("post_action_status_bar",{class:"PostActionStatusBar--hidden"},u));if(d)return(0,i.domInsertBefore)(d,r),{actionStatusBar:d}}}(e,t.postFullId);if(d){var v=d.actionStatusBar;if(v.classList.toggle("PostActionStatusBar--hidden",!a),a&&!(0,c.getPreviewElem)(e)){var g=(0,f.isWkLayerWallPostOpen)()?null===(o=window.wkcur)||void 0===o?void 0:o.wallTpl:null===(r=window.cur)||void 0===r?void 0:r.wallTpl;v.prepend((0,i.se)(p("post_reactions_preview",{class:s?"":"ReactionsPreview--empty",object_raw:e},g)))}if(u){var E=(0,c.getLikeBtnElem)(e);null==u||u(E)}}else m({},"Unable to init ActionStatusBar in post",t)}},E=function(e){var t=(0,a.likePostObjectId)(e.postFullId),n=(0,l.getPostElem)(e.postFullId,(0,c.getLikeWrap)(t));n||m(e,"Missing post element for reactions preview update",{payload:e,likeWrap:(0,c.getLikeWrap)(t)});var o=(0,c.getLikeBtnElem)(t);if(!!e.isQueueUpdate&&o&&function(e){var t=(0,u.getLastOwnReactionChangeTime)(e);if(!t)return!1;var n=t+1e4;return Date.now()<n}(o))(0,s.isDebugEnabled)()&&console.log("Ignoring reactions update from queue",e);else{var i;!e.isWithoutPreview&&e.isPrimaryLikeButtonClick&&!e.isFromWkLayer&&o&&(i=(0,v.preservePositionBetween)(o).start());var r=!e.isWithoutPreview&&(0,u.shouldReactionsPreviewBeVisible)(e.counts),d=r;null==n||n.classList.toggle("post--withActionStatusBar",d),g(t,e,{isActionStatusBarVisible:d,isReactionsPreviewVisible:r,positionTrackingEnd:i}),r&&(0,u.updateReactionsPreview)(t,{counts:e.counts}),(0,u.updateReactionsButtonForCounts)(t,{counts:e.counts})}},_=function(e){if(!s.ENABLED_IN_POST_REPLY)return!1;var t=(0,a.likeReplyObjectId)(e.replyFullId);(0,u.updateReactionsPreview)(t,{counts:e.counts}),(0,u.updateReactionsButtonForCounts)(t,{counts:e.counts})},h=function(){var e=[(0,d.registerUniqueListener)("wall-post-action-status-bar",d.WallDataEvents.post_reactions_counts_update,E),(0,d.registerUniqueListener)("wall-reply-reactions-counts",d.WallDataEvents.reply_reactions_counts_update,_)];return{onDestroy:function(){e.forEach((function(e){e()})),e=[]}}}},406108:(e,t,n)=>{"use strict";n.d(t,{WallDataEvents:()=>a,registerUniqueListener:()=>c,emitEvent:()=>l});var o=n(570655),i=n(970793),r=n(257451),a={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update"},s=(0,r.makeSharedState)("wall-data",(function(){return{emitter:new i.default,keyedListeners:Object.create(null)}})),u=function(e,t,n){var i,r,a=s(),u=null===(r=null===(i=a.keyedListeners)||void 0===i?void 0:i[e])||void 0===r?void 0:r[t];return u&&a.emitter.removeListener(e,u),function(e,t,n){var i,r=s();return r.emitter.addListener(e,n),r.keyedListeners[e]=(0,o.__assign)((0,o.__assign)({},r.keyedListeners[e]),((i={})[t]=n,i)),function(){var o,i;r.emitter.removeListener(e,n),(null===(o=r.keyedListeners[e])||void 0===o?void 0:o[t])===n&&(null===(i=r.keyedListeners[e])||void 0===i||delete i[t])}}(e,t,n)},c=function(e,t,n){return u(t,e,n)},l=function(e,t){s().emitter.emit(e,t)}},95402:(e,t,n)=>{"use strict";n.d(t,{WallDataEvents:()=>o.WallDataEvents,registerUniqueListener:()=>o.registerUniqueListener});var o=n(406108)},157420:(e,t,n)=>{"use strict";n.d(t,{getPostElem:()=>o});var o=function(e,t){var n,o;return null!==(o=null!==(n=function(e){var t;if("string"==typeof e)return null!==(t=document.querySelector("#post"+e))&&void 0!==t?t:void 0}(e))&&void 0!==n?n:null==t?void 0:t.closest("._post, .wl_post"))&&void 0!==o?o:void 0}},68482:(e,t,n)=>{"use strict";n.d(t,{isWkLayerWallPostOpen:()=>o});var o=function(){return!!window.cur.wallLayer}}},i={};function r(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e].call(n.exports,n,n.exports,r),n.exports}r.m=o,e=[],r.O=(t,n,o,i)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,o,i]=e[l],s=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(l--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,o,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,r.t=function(e,o){if(1&o&&(e=this(e)),8&o)return e;if("object"==typeof e&&e){if(4&o&&e.__esModule)return e;if(16&o&&"function"==typeof e.then)return e}var i=Object.create(null);r.r(i);var a={};t=t||[null,n({}),n([]),n(n)];for(var s=2&o&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>a[t]=()=>e[t]));return a.default=()=>e,r.d(i,a),i},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.e=()=>Promise.resolve(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={724:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[a,s,u]=n,c=0;for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(u)var l=u(r);for(t&&t(n);c<a.length;c++)i=a[c],r.o(e,i)&&e[i]&&e[i][0](),e[a[c]]=0;return r.O(l)},n=self.webpackChunkvk=self.webpackChunkvk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=r.O(void 0,[8288,8592,4509],(()=>r(66081)));a=r.O(a)})();